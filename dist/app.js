!function(t){function e(e){for(var n,s,a=e[0],u=e[1],l=e[2],p=0,f=[];p<a.length;p++)s=a[p],r[s]&&f.push(r[s][0]),r[s]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(t[n]=u[n]);for(c&&c(e);f.length;)f.shift()();return o.push.apply(o,l||[]),i()}function i(){for(var t,e=0;e<o.length;e++){for(var i=o[e],n=!0,a=1;a<i.length;a++){var u=i[a];0!==r[u]&&(n=!1)}n&&(o.splice(e--,1),t=s(s.s=i[0]))}return t}var n={},r={0:0},o=[];function s(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=n,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(i,n,function(e){return t[e]}.bind(null,n));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="dist";var a=window.webpackJsonp=window.webpackJsonp||[],u=a.push.bind(a);a.push=e,a=a.slice();for(var l=0;l<a.length;l++)e(a[l]);var c=u;o.push([568,1]),i()}({1208:function(t,e,i){"use strict";t.exports={width:800,height:600}},1209:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=u(n(173)),s=u(n(1210)),a=u(n(1236));function u(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default.State),r(e,[{key:"preload",value:function(){this.doneLoading=0,this.load.image("background","assets/space.jpg"),this.load.image("dirt","assets/dirt.jpg"),this.load.image("land","assets/land.jpg"),this.load.image("juan_tank","assets/tanks/juan_tank.png"),this.load.image("juan_turret","assets/tanks/barrel.png")}},{key:"create",value:function(){var t=this;this.io=s.default.connect(),this.io.on("connect",function(e){t.createOnConnection(e)}),this.background=this.add.sprite(0,0,"background").setOrigin(0,0),this.land=this.add.bitmapData(400,300),this.land.draw("land"),this.land.update(),this.land.addToWorld()}},{key:"update",value:function(){if(this.doneLoading){var t=this.getPlayerById(this.io.id);this.io.emit("client:player-moved",{id:this.io.id,posX:t.sprite.worldPosition.x,posY:t.sprite.worldPosition.y,angle:t.sprite.angle}),this.getPlayerById(this.io.id).update(),this.topText.setText("Your ID: "+this.io.id+"\n        "+this.players.length+" players\n        posX: "+Math.floor(t.sprite.worldPosition.x)+"\n        posY: "+Math.floor(t.sprite.worldPosition.y)+"\n      ")}}},{key:"createOnConnection",value:function(t){window.players=[],this.players=players,window.io=this.io,this.socketCreateListeners(),this.stage.backgroundColor="#aaa",this.physics.startSystem(o.default.Physics.ARCADE),this.topText=this.add.text(10,10,"",{font:"12px Arial",fill:"rgba(0, 0, 0, 0.64)"}),this.doneLoading=1}},{key:"socketCreateListeners",value:function(){var t=this;this.getPlayerById(this.io.id);this.io.emit("client:give-me-players"),this.io.on("server:all-players",function(e){e.forEach(function(e){e.id!=t.io.id&&players.push(new a.default(e.id,t,e.posX,e.posY,e.angle))})}),this.io.on("server:player-added",function(e){console.log("New "+e.id+" added to x: "+e.posX+", y: "+e.posY),players.push(new a.default(e.id,t,e.posX,e.posY,e.angle))}),this.io.on("server:player-disconnected",function(e){console.log("Player "+e+" disconnected"),t.deletePlayerById(e)}),this.io.on("server:player-moved",function(e){t.getPlayerById(e.id).setX(e.posX).setY(e.posY).setAngle(e.angle)})}},{key:"getPlayerById",value:function(t){var e=this.players.find(function(e){return e.id===t});return e||null}},{key:"deletePlayerById",value:function(t){this.players.findIndex(function(e){return e.id===t})>-1&&(this.players[i].sprite.destroy(),this.players.splice(i,1))}}]),e}();e.default=l},1233:function(t,e){},1236:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var r=function(){function t(e,i,n,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.game=i,this.cursors=this.input.keyboard.createCursorKeys(),this.sprite=this.game.add.sprite(0,0,"juan_tank",100),this.sprite.scale.setTo(-.1,.1),this.game.physics.arcade.enable(this.sprite),this.sprite.body.collideWorldBounds=!0,this.sprite.inputEnabled=!0,this.sprite.anchor.setTo(0,.5),this.sprite.x=n,this.sprite.y=r,this.sprite.angle=o,this.sprite.body.allowRotation=!1}return n(t,[{key:"update",value:function(){this.cursors.left.isDown?(this.sprite.setVelocityX(-160),this.sprite.flipX=!0):this.cursors.right.isDown?(this.sprite.setVelocityX(160),this.sprite.flipX=!1):this.sprite.setVelocityX(0),this.cursors.up.isDown?this.sprite.setVelocityY(-160):this.cursors.down.isDown?this.sprite.setVelocityY(160):this.sprite.setVelocityY(0)}},{key:"setX",value:function(t){return this.cursors.left.isDown&&(this.sprite.x=t--),this.cursors.right.isDown&&(this.sprite.x=t++),this}},{key:"setY",value:function(t){return this.cursors.up.isDown&&(this.sprite.y=t++),this.cursors.down.isDown&&(this.sprite.y=t--),this}},{key:"setAngle",value:function(t){return this.sprite.angle=t++,this}}]),t}();e.default=r},568:function(t,e,i){"use strict";var n=s(i(173)),r=s(i(1208)),o=s(i(1209));function s(t){return t&&t.__esModule?t:{default:t}}new(function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r.default.width,r.default.height,n.default.AUTO));return t.state.add("GameState",o.default),t.state.start("GameState"),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,n.default.Game),e}())}});